<!-- views/edit-entry.ejs -->
<%- include('partials/header') %>
<div class="container mx-auto px-4 pt-16 pb-20">
    <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-bold text-pink-600 mb-4">แก้ไขบันทึก</h2>
        <form action="/diary/edit/<%= entry.id %>" method="POST" enctype="multipart/form-data">
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">หัวข้อ</label>
                <input type="text" name="title" value="<%= entry.title %>" required
                       class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-pink-500">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">เนื้อหา</label>
                <textarea name="content" rows="4" required
                          class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-pink-500"><%= entry.content %></textarea>
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">อารมณ์</label>
                <select name="mood" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-pink-500">
                    <option value="happy" <%= entry.mood === 'happy' ? 'selected' : '' %>>มีความสุข</option>
                    <option value="love" <%= entry.mood === 'love' ? 'selected' : '' %>>หลงรัก</option>
                    <option value="sad" <%= entry.mood === 'sad' ? 'selected' : '' %>>เศร้า</option>
                    <option value="angry" <%= entry.mood === 'angry' ? 'selected' : '' %>>โกรธ</option>
                </select>
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">รูปภาพปัจจุบัน</label>
                <% if (entry.image_url) { %>
                    <img src="<%= entry.image_url %>" alt="Current Image" class="w-32 h-32 object-cover rounded-lg mb-2">
                    <div class="flex items-center mb-2">
                        <input type="checkbox" name="removeImage" id="removeImage" class="mr-2">
                        <label for="removeImage">ลบรูปภาพ</label>
                    </div>
                <% } %>
                <label class="block text-gray-700 mb-2">อัพโหลดรูปภาพใหม่</label>
                <input type="file" name="image" accept="image/*"
                       class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-pink-500">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">สถานที่</label>
                <input type="text" name="location" value="<%= entry.location %>"
                       class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-pink-500">
            </div>
            <div class="flex space-x-4">
                <button type="submit" class="flex-1 bg-pink-600 text-white py-2 rounded-lg hover:bg-pink-700">
                    บันทึกการแก้ไข
                </button>
                <a href="/diary/<%= entry.id %>" 
                   class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 text-center">
                    ยกเลิก
                </a>
            </div>
        </form>
    </div>
</div>
<%- include('partials/footer') %>